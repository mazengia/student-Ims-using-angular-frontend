<nz-card [nzTitle]="cardTitle" [nzExtra]="tabExtraTpl">
  <ng-template #cardTitle>
    <i nz-icon nzType="branches"></i> student Enrollment
  </ng-template>
  <ng-template #tabExtraTpl>
    <button nz-button nzType="primary" (click)="open()" class="add-button"><i nz-icon nzType="plus"></i>Enroll Student
    </button>
  </ng-template>
  <nz-table #basicTable [nzData]="listOfStudentData">
    <thead>
    <tr>
      <th>#</th>
      <th>User Name</th>
      <th>FSemister</th>
      <th>SSemister</th>
      <th>TSemister</th>
      <th nz-tooltip="First Semester GPA">FGPA</th>
      <th nz-tooltip="Second Semester GPA">SGPA</th>
      <th nz-tooltip="Third Semester GPA">TGPA</th>
      <th nz-tooltip="Previous GPA">PGPA</th>
      <th nz-tooltip="Cumulative GPA">CGPA</th>
      <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let data of basicTable.data; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{data.systemUser.username}}</td>
      <td>{{data.firstSemester }}</td>
      <td>{{data.secondSemester}}</td>
      <td>{{data.thirdSemester}}</td>
      <td>{{data.firstSemesterPoint}}</td>
      <td>{{data.secondSemesterPoint}}</td>
      <td>{{data.thirdSemesterPoint}}</td>
      <td>{{data.pgpa}}</td>
      <td>{{data.cgpa}}</td>
      <td nzAlign="center">
        <i class="edit-btn" nz-icon nzType="edit" (click)="editDrawer(data.id)" nzTheme="outline" nz-tooltip="edit"></i>
        <nz-divider nzType="vertical"></nz-divider>
        <a class="delete-button" nz-popconfirm="" nzPopconfirmTitle="Are you sure delete this task?"
           (nzOnConfirm)="confirm(data.id)" (nzOnCancel)="cancel()">
          <i nzTooltipColor="red" nz-icon nzType="delete" nzTheme="outline"
             nz-tooltip="delete"></i>
        </a>
      </td>
    </tr>
    </tbody>
  </nz-table>
</nz-card>

<!--    add drawer-->

<nz-drawer
  [nzClosable]="true"
  [nzVisible]="visibleDrawer"
  nzPlacement="right"
  nzWidth="25%"
  nzTitle="Enroll Student"
  (nzOnClose)="close()">
  <form *nzDrawerContent nz-form [formGroup]="addStudentForm" (ngSubmit)="enrollStudent()">
    <div *ngIf="successMessage">
      <div class="row">
        <div class="col-md-1 "></div>
        <div class="col-md-10 alert alert-success">
          <H4>{{successMessage}}</H4>
        </div>
        <div class="col-md-1"></div>
      </div>
    </div>
    <div *ngIf="errorMessage">
      <div class="row">
        <div class="col-md-1 "></div>
        <div class="col-md-10 alert alert-danger">
          <H4>{{errorMessage}}</H4>
        </div>
        <div class="col-md-1"></div>
      </div>
    </div>
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>batch</nz-form-label>
      <nz-form-control [nzSpan]="18" [nzErrorTip]="userErrorTpl">
        <input type="number" nz-input formControlName="batch"/>
        <ng-template #userErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">Please input batch!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>firstSemester status</nz-form-label>
      <nz-select formControlName="firstSemester" nzPlaceHolder="Select firstSemester status">
        <nz-option *ngFor="let data of statusList" nzValue="{{data.name}}" nzLabel="{{data.name}} "></nz-option>
      </nz-select>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>secondSemester status</nz-form-label>
      <nz-select formControlName="secondSemester" nzPlaceHolder="Select secondSemester status">
        <nz-option *ngFor="let data of statusList" nzValue="{{data.name}}" nzLabel="{{data.name}} "></nz-option>
      </nz-select>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>thirdSemester status</nz-form-label>
      <nz-select formControlName="thirdSemester" nzPlaceHolder="Select thirdSemester status">
        <nz-option *ngFor="let data of statusList" nzValue="{{data.name}}" nzLabel="{{data.name}} "></nz-option>
      </nz-select>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>firstSemesterPoint</nz-form-label>
      <nz-form-control [nzSpan]="18" [nzErrorTip]="userErrorTpl">
        <input nz-input type="number" formControlName="firstSemesterPoint"/>
        <ng-template #userErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">Please input firstSemesterPoint!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>secondSemesterPoint</nz-form-label>
      <nz-form-control [nzSpan]="18" [nzErrorTip]="userErrorTpl">
        <input nz-input type="number" formControlName="secondSemesterPoint"/>
        <ng-template #userErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">Please input secondSemesterPoint!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>thirdSemesterPoint</nz-form-label>
      <nz-form-control [nzSpan]="18" [nzErrorTip]="userErrorTpl">
        <input nz-input type="number" formControlName="thirdSemesterPoint"/>
        <ng-template #userErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">Please input thirdSemesterPoint!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>PGPA</nz-form-label>
      <nz-form-control [nzSpan]="18" [nzErrorTip]="userErrorTpl">
        <input nz-input type="number" formControlName="pgpa"/>
        <ng-template #userErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">Please input PGPA!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>CGPA</nz-form-label>
      <nz-form-control [nzSpan]="18" [nzErrorTip]="userErrorTpl">
        <input nz-input type="number" formControlName="cgpa"/>
        <ng-template #userErrorTpl let-control>
          <ng-container *ngIf="control.hasError('required')">Please input CGPA!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>


    <div formGroupName="systemUser">
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>Department</nz-form-label>
        <nz-select formControlName="id" nzPlaceHolder="Select student userName">
          <nz-option *ngFor="let data of listOfStudent" nzValue="{{data.id}}" nzLabel="{{data.username}} "></nz-option>
        </nz-select>
      </nz-form-item>
    </div>

    <nz-form-item>
      <nz-form-control [nzOffset]="7" [nzSpan]="18">
        <button nz-button nzType="primary" [disabled]="!addStudentForm.valid">Submit</button>
        <button style="margin-top: 10px" nz-button (click)="resetForm($event)">Reset</button>
      </nz-form-control>
    </nz-form-item>
  </form>
</nz-drawer>

<!--    edit drawer-->

<nz-drawer
  [nzClosable]="true"
  [nzVisible]="visibleEditDrawer"
  nzWidth="25%"
  nzPlacement="right"
  nzTitle="Edit Student"
  (nzOnClose)="close()">

  <form *nzDrawerContent nz-form [formGroup]="editForm" (ngSubmit)="UpdateForm(editForm.value)">
    <div *ngIf="successMessage">
      <div class="row">
        <div class="col-md-1 "></div>
        <div class="col-md-10 alert alert-success">
          <H4 style="color: green">{{successMessage}}</H4>
        </div>
        <div class="col-md-1"></div>
      </div>
    </div>
    <div *ngIf="errorMessage">
      <div class="row">
        <div class="col-md-1 "></div>
        <div class="col-md-10 alert alert-danger">
          <H4>{{errorMessage}}</H4>
        </div>
        <div class="col-md-1"></div>
      </div>
    </div>

    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>name</nz-form-label>
      <nz-form-control [nzSpan]="18">
        <input nz-input formControlName="name" ngModel="{{editObject.firstName }}"/>
        <ng-template let-control>
          <ng-container *ngIf="control.hasError('required')">Please input department name!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>


    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>userName</nz-form-label>
      <nz-form-control [nzSpan]="18">
        <input nz-input formControlName="code" ngModel="{{editObject.username }}"/>
        <ng-template let-control>
          <ng-container *ngIf="control.hasError('required')">Please input department code!</ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>


    <nz-form-item>
      <nz-form-control [nzOffset]="7" [nzSpan]="18">
        <button nz-button nzType="primary">Submit</button>
      </nz-form-control>
    </nz-form-item>

  </form>
</nz-drawer>

<!--    edit drawer-->


